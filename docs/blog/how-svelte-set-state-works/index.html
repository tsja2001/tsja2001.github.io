<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta property="og:title" content="Svelte 的异步更新实现原理" />
<meta property="og:type" content="website" />
<meta property="og:url" content="https://lutaonan.com/blog/how-svelte-set-state-works/" />
  <link rel="stylesheet" href="/styles/main.css">
  <link rel="me" href="https://mas.to/@djyde">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/prismjs@1.27.0/themes/prism.min.css">
  
  <title>Svelte 的异步更新实现原理 | Tsja&#39;s Blog</title>
  
  <script async defer data-website-id="a7250fef-ff01-4734-a866-6f0eb1c6e7a0" src="https://a.taonan.lu/ana.js"></script>
</head>
<body>
  
<div>
  <div class="container mx-auto prose py-12 sm:py-24 px-12 sm:px-0">
    <div class="mb-12">
      <a class="no-underline font-bold" href="/">Tsja&#39;s Blog</a>
    </div>
    <h1>Svelte 的异步更新实现原理</h1>
    <div class="italic text-gray-500">
      2021/04/11
    </div>
    <div>
      <p>在 <a href="/blog/svelte">我对 Svelte 的看法</a> 一文里，我分析了 Svelte 在编译时实现 Reactive 的原理。在这篇文章，我将分析在 Svelte 里更新一个状态 (state) 值后更新到 UI 的这一过程。</p>
<p>阅读本文前，你应该至少：</p>
<ul>
<li>读过 <a href="/blog/svelte">我对 Svelte 的看法</a></li>
<li>明白 JavaScript 中的 <a href="https://javascript.info/event-loop">事件循环</a> 机制</li>
</ul>
<h2 id="%E5%8E%9F%E7%90%86%E5%88%86%E6%9E%90" tabindex="-1">原理分析</h2>
<p>为了保持简单，先从一个和 Svelte 无关的例子讲起：</p>
<pre class="language-javascript"><code class="language-javascript"><span class="token comment">// 假设我们正在实现一个 counter, 只有一个 state，就是 count, 它是一个 number:</span><br><span class="token keyword">let</span> count <span class="token operator">=</span> <span class="token number">0</span><br><br><span class="token comment">// 我们可以实现一个 setCount, 来改变 count 的值，顺便执行更新 UI:</span><br><span class="token keyword">function</span> <span class="token function">setCount</span><span class="token punctuation">(</span><span class="token parameter">newVal</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>  count <span class="token operator">=</span> newVal<br>  <span class="token function">updateUI</span><span class="token punctuation">(</span><span class="token punctuation">)</span><br><span class="token punctuation">}</span><br><br><span class="token keyword">function</span> <span class="token function">updateUI</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"update ui with count:"</span><span class="token punctuation">,</span> count<span class="token punctuation">)</span><br><span class="token punctuation">}</span><br><br><span class="token function">setCount</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token comment">//=> update ui with count: 1</span><br><span class="token function">setCount</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token comment">//=> update ui with count: 2</span><br><span class="token function">setCount</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span> <span class="token comment">//=> update ui with count: 3</span></code></pre>
<p>这样实现很简单，但是有一个严重的问题：连续的状态更新会连续触发 <code>updateUI</code>, 性能会非常糟糕。解决这个问题的方法是：<strong>把同一个事件循环里的所有状态更新造成的 UI 更新统一合并（batch）到一个 microtask 里统一执行。</strong></p>
<pre class="language-js"><code class="language-js"><span class="token comment">// 基于 Promise 实现一个把函数放到 microtask 里的函数</span><br><span class="token keyword">function</span> <span class="token function">createMicroTask</span><span class="token punctuation">(</span><span class="token parameter">fn</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>  Promise<span class="token punctuation">.</span><span class="token function">resovle</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>fn<span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span><br><br><span class="token keyword">let</span> updateScheduled <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span><br><span class="token keyword">function</span> <span class="token function">scheduleUpdate</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>updateScheduled<span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token comment">// 当首次 schedule 时，把 updateUI 放到 microtask 中</span><br>    <span class="token function">createMicroTask</span><span class="token punctuation">(</span>updateUI<span class="token punctuation">)</span><br>    updateScheduled <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br><span class="token punctuation">}</span><br><br><span class="token keyword">function</span> <span class="token function">updateUI</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>  updateScheduled <span class="token operator">=</span> <span class="token boolean">false</span><br>  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"update ui with count:"</span><span class="token punctuation">,</span> count<span class="token punctuation">)</span><br><span class="token punctuation">}</span><br><br><span class="token comment">// 在 setCount 时，不再直接触发 updateUI, 而是 schedule 一个 update</span><br><span class="token keyword">function</span> <span class="token function">setCount</span><span class="token punctuation">(</span><span class="token parameter">newVal</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>  count <span class="token operator">=</span> newVal<br>	<span class="token function">scheduleUpdate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><br><span class="token punctuation">}</span><br><br><span class="token function">setCount</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><br><span class="token function">setCount</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><br><span class="token function">setCount</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><br><span class="token comment">//=> update ui with count: 3</span></code></pre>
<p>这样，在同一个事件循环里，多个状态更新只会触发一次 UI 更新。</p>
<p>现在假设页面上有一个 <code>h1</code>, <code>updateUI</code> 中会更新它：</p>
<pre class="language-js"><code class="language-js"><span class="token keyword">let</span> count <span class="token operator">=</span> <span class="token number">0</span><br><span class="token keyword">const</span> h1 <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'h1'</span><span class="token punctuation">)</span><br><br><span class="token keyword">function</span> <span class="token function">updateUI</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>  updateScheduled <span class="token operator">=</span> <span class="token boolean">false</span><br>	h1<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>count<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><br><span class="token punctuation">}</span><br><br><span class="token function">setCount</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><br><span class="token function">setCount</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><br><span class="token function">setCount</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><br><span class="token comment">//=> update ui with count: 3 </span></code></pre>
<p>So far so good. 但是相信不少人年轻的时候曾经写过这样的代码：</p>
<pre class="language-js"><code class="language-js"><span class="token function">setCount</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><br><span class="token function">setCount</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><br><span class="token function">setCount</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><br>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>h1<span class="token punctuation">.</span>innerHTML<span class="token punctuation">)</span> <span class="token comment">//=> 0</span></code></pre>
<p>在 <code>setCount(3)</code> 后， <code>h1.innerHTML</code> 竟不是预期中的 3. 仔细一想，当然了，<code>updateUI</code> 是在同步代码执行完后，开始执行 microtask 队列的时候才触发的啊。</p>
<p>为了可以在 <code>setCount</code> 后拿到更新后正确的值，我们可以把关于 UI 的操作也放到下一个 microtask 才执行。为了方便，我们可以写一个 <code>tick</code> 函数：</p>
<pre class="language-js"><code class="language-js"><span class="token keyword">function</span> <span class="token function">tick</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise<span class="token punctuation">.</span>resolve</span><span class="token punctuation">(</span><span class="token punctuation">)</span><br><span class="token punctuation">}</span><br><br><span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br>  <span class="token function">setCount</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><br>  <span class="token function">setCount</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><br>  <span class="token function">setCount</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><br>  <span class="token keyword">await</span> <span class="token function">tick</span><span class="token punctuation">(</span><span class="token punctuation">)</span><br>  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>h1<span class="token punctuation">.</span>innerHTML<span class="token punctuation">)</span> <span class="token comment">//=> 3</span><br><span class="token punctuation">}</span></code></pre>
<h2 id="svelte-%E7%9A%84%E5%AE%9E%E9%99%85%E5%81%9A%E6%B3%95" tabindex="-1">Svelte 的实际做法</h2>
<p>回到 Svelte:</p>
<pre class="language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript"><br>    <span class="token keyword">let</span> count <span class="token operator">=</span> <span class="token number">0</span><br></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span><br><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">></span></span><br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">></span></span>{count}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span><br>    &lt;button on:click={() => count++}>+<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">></span></span><br>    &lt;button on:click={() => count--}>-<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">></span></span><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></code></pre>
<p>这个组件会被编译成一个 fragment （你不需要读懂下面的代码）:</p>
<pre class="language-js"><code class="language-js"><span class="token keyword">function</span> <span class="token function">create_fragment</span><span class="token punctuation">(</span><span class="token parameter">ctx</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>	<span class="token keyword">let</span> div<span class="token punctuation">;</span><br>	<span class="token keyword">let</span> span<span class="token punctuation">;</span><br>	<span class="token keyword">let</span> t0<span class="token punctuation">;</span><br>	<span class="token keyword">let</span> t1<span class="token punctuation">;</span><br>	<span class="token keyword">let</span> button0<span class="token punctuation">;</span><br>	<span class="token keyword">let</span> t3<span class="token punctuation">;</span><br>	<span class="token keyword">let</span> button1<span class="token punctuation">;</span><br>	<span class="token keyword">let</span> mounted<span class="token punctuation">;</span><br>	<span class="token keyword">let</span> dispose<span class="token punctuation">;</span><br><br>	<span class="token keyword">return</span> <span class="token punctuation">{</span><br>		<span class="token function">c</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>			div <span class="token operator">=</span> <span class="token function">element</span><span class="token punctuation">(</span><span class="token string">"div"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>			span <span class="token operator">=</span> <span class="token function">element</span><span class="token punctuation">(</span><span class="token string">"span"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>			t0 <span class="token operator">=</span> <span class="token function">text</span><span class="token punctuation">(</span><span class="token comment">/*count*/</span> ctx<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>			t1 <span class="token operator">=</span> <span class="token function">space</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>			button0 <span class="token operator">=</span> <span class="token function">element</span><span class="token punctuation">(</span><span class="token string">"button"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>			button0<span class="token punctuation">.</span>textContent <span class="token operator">=</span> <span class="token string">"+"</span><span class="token punctuation">;</span><br>			t3 <span class="token operator">=</span> <span class="token function">space</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>			button1 <span class="token operator">=</span> <span class="token function">element</span><span class="token punctuation">(</span><span class="token string">"button"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>			button1<span class="token punctuation">.</span>textContent <span class="token operator">=</span> <span class="token string">"-"</span><span class="token punctuation">;</span><br>		<span class="token punctuation">}</span><span class="token punctuation">,</span><br>		<span class="token function">m</span><span class="token punctuation">(</span><span class="token parameter">target<span class="token punctuation">,</span> anchor</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>			<span class="token function">insert</span><span class="token punctuation">(</span>target<span class="token punctuation">,</span> div<span class="token punctuation">,</span> anchor<span class="token punctuation">)</span><span class="token punctuation">;</span><br>			<span class="token function">append</span><span class="token punctuation">(</span>div<span class="token punctuation">,</span> span<span class="token punctuation">)</span><span class="token punctuation">;</span><br>			<span class="token function">append</span><span class="token punctuation">(</span>span<span class="token punctuation">,</span> t0<span class="token punctuation">)</span><span class="token punctuation">;</span><br>			<span class="token function">append</span><span class="token punctuation">(</span>div<span class="token punctuation">,</span> t1<span class="token punctuation">)</span><span class="token punctuation">;</span><br>			<span class="token function">append</span><span class="token punctuation">(</span>div<span class="token punctuation">,</span> button0<span class="token punctuation">)</span><span class="token punctuation">;</span><br>			<span class="token function">append</span><span class="token punctuation">(</span>div<span class="token punctuation">,</span> t3<span class="token punctuation">)</span><span class="token punctuation">;</span><br>			<span class="token function">append</span><span class="token punctuation">(</span>div<span class="token punctuation">,</span> button1<span class="token punctuation">)</span><span class="token punctuation">;</span><br><br>			<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>mounted<span class="token punctuation">)</span> <span class="token punctuation">{</span><br>				dispose <span class="token operator">=</span> <span class="token punctuation">[</span><br>					<span class="token function">listen</span><span class="token punctuation">(</span>button0<span class="token punctuation">,</span> <span class="token string">"click"</span><span class="token punctuation">,</span> <span class="token comment">/*click_handler*/</span> ctx<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span><br>					<span class="token function">listen</span><span class="token punctuation">(</span>button1<span class="token punctuation">,</span> <span class="token string">"click"</span><span class="token punctuation">,</span> <span class="token comment">/*click_handler_1*/</span> ctx<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">)</span><br>				<span class="token punctuation">]</span><span class="token punctuation">;</span><br><br>				mounted <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span><br>			<span class="token punctuation">}</span><br>		<span class="token punctuation">}</span><span class="token punctuation">,</span><br>		<span class="token function">p</span><span class="token punctuation">(</span><span class="token parameter">ctx<span class="token punctuation">,</span> <span class="token punctuation">[</span>dirty<span class="token punctuation">]</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>			<span class="token keyword">if</span> <span class="token punctuation">(</span>dirty <span class="token operator">&amp;</span> <span class="token comment">/*count*/</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token function">set_data</span><span class="token punctuation">(</span>t0<span class="token punctuation">,</span> <span class="token comment">/*count*/</span> ctx<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>		<span class="token punctuation">}</span><span class="token punctuation">,</span><br>		<span class="token literal-property property">i</span><span class="token operator">:</span> noop<span class="token punctuation">,</span><br>		<span class="token literal-property property">o</span><span class="token operator">:</span> noop<span class="token punctuation">,</span><br>		<span class="token function">d</span><span class="token punctuation">(</span><span class="token parameter">detaching</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>			<span class="token keyword">if</span> <span class="token punctuation">(</span>detaching<span class="token punctuation">)</span> <span class="token function">detach</span><span class="token punctuation">(</span>div<span class="token punctuation">)</span><span class="token punctuation">;</span><br>			mounted <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span><br>			<span class="token function">run_all</span><span class="token punctuation">(</span>dispose<span class="token punctuation">)</span><span class="token punctuation">;</span><br>		<span class="token punctuation">}</span><br>	<span class="token punctuation">}</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span><br><br><span class="token keyword">function</span> <span class="token function">instance</span><span class="token punctuation">(</span><span class="token parameter">$$self<span class="token punctuation">,</span> $$props<span class="token punctuation">,</span> $$invalidate</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>	<span class="token keyword">let</span> count <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span><br>	<span class="token keyword">const</span> <span class="token function-variable function">click_handler</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token function">$$invalidate</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> count<span class="token operator">++</span><span class="token punctuation">,</span> count<span class="token punctuation">)</span><span class="token punctuation">;</span><br>	<span class="token keyword">const</span> <span class="token function-variable function">click_handler_1</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token function">$$invalidate</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> count<span class="token operator">--</span><span class="token punctuation">,</span> count<span class="token punctuation">)</span><span class="token punctuation">;</span><br>	<span class="token keyword">return</span> <span class="token punctuation">[</span>count<span class="token punctuation">,</span> click_handler<span class="token punctuation">,</span> click_handler_1<span class="token punctuation">]</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span><br></code></pre>
<p>不要被吓到，一个 Svelte Fragment 实际上是一个函数返回几个必要的方法：</p>
<pre class="language-js"><code class="language-js"><span class="token keyword">function</span> <span class="token function">createFragment</span><span class="token punctuation">(</span><span class="token parameter">ctx</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>  <span class="token keyword">return</span> <span class="token punctuation">{</span><br>    <span class="token comment">// 创建 DOM 的方法</span><br>    <span class="token function">c</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span><br>    <span class="token comment">// 把 DOM mount 到节点的方法，以及事件绑定</span><br>    <span class="token function">m</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span><br>    <span class="token comment">// DOM 节点更新的方法</span><br>    <span class="token function">p</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span><br>		<span class="token comment">// unmount 的方法</span><br>    <span class="token function">d</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><br>  <span class="token punctuation">}</span><br><span class="token punctuation">}</span></code></pre>
<p>这里的 <code>p()</code>, 就是类似上文提到的 <code>updateUI</code>.</p>
<p>而 <code>instance</code> 则是 <code>&lt;script&gt;</code> 之中定义的变量和一些 event handlers. <code>$$invalidate(0, count--, count)</code> 类似上文提到的 <code>setCount</code>. 在真实的 Svelte 中整个状态更新的流程简单地来说就是：</p>
<ol>
<li>用户点击 button, 触发 <code>$$invalidate(0, count--, count)</code></li>
<li>触发 <code>schedule_update()</code>, 通知框架这个 fragment 需要被更新（<code>make_dirty()</code>），框架会维护一个 <code>dirty_components</code> 的数组</li>
<li>同步代码执行完后，开始执行 microtask, 触发更新（<code>flush</code>），遍历 <code>dirty_components</code>, 触发每一个 component 的 <code>p()</code></li>
</ol>

    </div>
    <hr />
      <div class="text-sm text-center">
        评论和交流请发送邮件到 hi@taonan.lu
      </div>
      <hr />
    <div class="text-center">
  <img class="w-64 inline-block" src="https://i.loli.net/2021/10/20/JZ26YwDhmGzUy4u.jpg" alt="" />
  <div class="text-sm">
    通过支付宝 djyde520@gmail.com 或赞赏码赞助此文
  </div>
</div>
    <footer class="text-sm py-12 text-gray-500 text-center">
  Tsja's Blog since 2023
</footer>

  </div>

</div>



</body>
</html>